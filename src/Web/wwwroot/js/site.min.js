$(document).ready(function(){var t=$.getJSON("/api/beers",function(t){$.getJSON("/api/Releases",function(i){ko.applyBindings(new n(t,i))})}),n=function(n,t){var i=this;i.filter=ko.observable("");n.forEach(function(n){n.filteredBeers=ko.computed(function(){var t=i.filter(),r;return t&&t!="None"?ko.utils.arrayFilter(n.beers,function(n){return n.name.toLowerCase().search(t.toLowerCase())>=0||n.type!=null&&n.type.toLowerCase().search(t.toLowerCase())>=0||(n.brewery!=null&&n.brewery.toLowerCase().search(t.toLowerCase()))>=0}):n.beers})});t.forEach(function(n){n.filteredBeers=ko.computed(function(){var t=i.filter(),r;return t&&t!="None"?ko.utils.arrayFilter(n.beers,function(n){return n.name.toLowerCase().search(t.toLowerCase())>=0||n.type!=null&&n.type.toLowerCase().search(t.toLowerCase())>=0||(n.brewery!=null&&n.brewery.toLowerCase().search(t.toLowerCase()))>=0}):n.beers});var t=new Date(n.date),r=t.getDate()+"/"+(t.getMonth()+1)+" "+t.getFullYear();n.name=n.type+" "+r});i.update=function(){$.get("api/beers/update",function(){location.reload()})};i.pubs=ko.observableArray(n);i.releases=ko.observableArray(t);i.pubMode=ko.observable(!0);i.modeText=ko.observable("Systembolaget");i.changeMode=function(){i.pubMode(!i.pubMode());i.pubMode()?i.modeText("Systembolaget"):i.modeText("Pubbar")}}});